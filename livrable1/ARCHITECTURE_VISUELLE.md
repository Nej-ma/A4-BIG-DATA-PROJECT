# ğŸ—ï¸ Architecture Visuelle - Stack Big Data CHU

## Vue d'ensemble simplifiÃ©e

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸŒ UTILISATEURS                          â”‚
â”‚  Analystes â€¢ Data Scientists â€¢ DÃ©cideurs â€¢ MÃ©decins              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                              â”‚
             â–¼                              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ğŸ“Š SUPERSET   â”‚           â”‚  ğŸ““ JUPYTER     â”‚
    â”‚   Dashboards    â”‚           â”‚   Notebooks     â”‚
    â”‚   (Power BI)    â”‚           â”‚   Analyse       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                              â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚     ğŸ¥‡ ZONE GOLD         â”‚
              â”‚   Data Warehouse         â”‚
              â”‚  (ModÃ¨le dimensionnel)   â”‚
              â”‚                          â”‚
              â”‚  â€¢ DIM_TEMPS             â”‚
              â”‚  â€¢ DIM_PATIENT           â”‚
              â”‚  â€¢ DIM_ETABLISSEMENT     â”‚
              â”‚  â€¢ FAIT_CONSULTATION     â”‚
              â”‚  â€¢ FAIT_HOSPITALISATION  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    T2 Transform
                   (ModÃ¨le mÃ©tier)
                         â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   ğŸ¥ˆ ZONE SILVER     â”‚
              â”‚  DonnÃ©es nettoyÃ©es   â”‚
              â”‚    (Conformes RGPD)  â”‚
              â”‚                      â”‚
              â”‚  â€¢ patient_clean     â”‚
              â”‚  â€¢ consultation_cleanâ”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                   T1 Transform
                  (ConformitÃ©)
                         â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   ğŸ¥‰ ZONE BRONZE     â”‚
              â”‚   DonnÃ©es brutes     â”‚
              â”‚                      â”‚
              â”‚  â€¢ postgresql/       â”‚
              â”‚  â€¢ csv/              â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚  MinIO (S3)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                         â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚    âš™ï¸ AIRFLOW        â”‚
              â”‚   Orchestration      â”‚
              â”‚                      â”‚
              â”‚  Pipeline ETLT       â”‚
              â”‚  Planification       â”‚
              â”‚  Monitoring          â”‚
              â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
                 â”‚                 â”‚
          Extractâ”‚                 â”‚Extract
                 â”‚                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ğŸ—„ï¸ POSTGRESQL   â”‚    â”‚  ğŸ“ CSV Files  â”‚
    â”‚  Base opÃ©rationnelle   â”‚  Fichiers platsâ”‚
    â”‚                  â”‚    â”‚                â”‚
    â”‚ â€¢ patient        â”‚    â”‚ â€¢ etablissementsâ”‚
    â”‚ â€¢ consultation   â”‚    â”‚ â€¢ satisfaction â”‚
    â”‚ â€¢ professionnel  â”‚    â”‚ â€¢ deces        â”‚
    â”‚ â€¢ diagnostic     â”‚    â”‚ â€¢ hospitalisationâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Architecture dÃ©taillÃ©e avec Spark

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COUCHE VISUALISATION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Apache Superset â”‚         â”‚   Jupyter Lab    â”‚           â”‚
â”‚  â”‚  :8088           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤   :8888          â”‚           â”‚
â”‚  â”‚                  â”‚         â”‚                  â”‚           â”‚
â”‚  â”‚  â€¢ Dashboards    â”‚         â”‚  â€¢ PySpark       â”‚           â”‚
â”‚  â”‚  â€¢ Charts        â”‚         â”‚  â€¢ Pandas        â”‚           â”‚
â”‚  â”‚  â€¢ SQL Lab       â”‚         â”‚  â€¢ Visualisation â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                             â”‚
               â”‚                             â”‚
               â”‚         READ/QUERY          â”‚
               â”‚                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA LAKE (MinIO S3)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    ğŸ¥‡ GOLD ZONE                          â”‚ â”‚
â”‚  â”‚              s3://gold/                                   â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  dimensions/                  faits/                     â”‚ â”‚
â”‚  â”‚  â”œâ”€ dim_temps.parquet         â”œâ”€ fait_consultation/     â”‚ â”‚
â”‚  â”‚  â”œâ”€ dim_patient.parquet        â”‚  â”œâ”€ annee=2019/        â”‚ â”‚
â”‚  â”‚  â”œâ”€ dim_etablissement.parquet  â”‚  â”œâ”€ annee=2020/        â”‚ â”‚
â”‚  â”‚  â”œâ”€ dim_diagnostic.parquet     â”‚  â””â”€ annee=2021/        â”‚ â”‚
â”‚  â”‚  â”œâ”€ dim_professionnel.parquet  â”œâ”€ fait_hospitalisation/ â”‚ â”‚
â”‚  â”‚  â””â”€ ...                        â”œâ”€ fait_deces/           â”‚ â”‚
â”‚  â”‚                                 â””â”€ fait_satisfaction/    â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Format: Parquet (compression Snappy)                    â”‚ â”‚
â”‚  â”‚  Partitionnement: Par annÃ©e, rÃ©gion                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                               â”‚                                â”‚
â”‚                               â”‚ T2 (Spark)                     â”‚
â”‚                               â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    ğŸ¥ˆ SILVER ZONE                         â”‚ â”‚
â”‚  â”‚              s3://silver/                                 â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  patient/                    consultation/               â”‚ â”‚
â”‚  â”‚  â”œâ”€ patient_clean_20250110   â”œâ”€ consultation_clean_...  â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  etablissement/              satisfaction/               â”‚ â”‚
â”‚  â”‚  professionnel/              deces/                      â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Format: CSV ou Parquet                                  â”‚ â”‚
â”‚  â”‚  DonnÃ©es: PseudonymisÃ©es, validÃ©es, normalisÃ©es          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                               â”‚                                â”‚
â”‚                               â”‚ T1 (Airflow Python)            â”‚
â”‚                               â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    ğŸ¥‰ BRONZE ZONE                         â”‚ â”‚
â”‚  â”‚              s3://bronze/                                 â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  postgresql/                 csv/                        â”‚ â”‚
â”‚  â”‚  â”œâ”€ patient/                 â”œâ”€ etablissements/          â”‚ â”‚
â”‚  â”‚  â”œâ”€ consultation/            â”œâ”€ satisfaction/            â”‚ â”‚
â”‚  â”‚  â”œâ”€ professionnel/           â”œâ”€ deces/                   â”‚ â”‚
â”‚  â”‚  â””â”€ diagnostic/              â””â”€ hospitalisation/         â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Format: CSV (tel quel)                                  â”‚ â”‚
â”‚  â”‚  MÃ©tadonnÃ©es: JSON (source, date, checksum)             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                               â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ Load (Airflow)
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COUCHE ORCHESTRATION                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Apache Airflow :8080                        â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  DAG: chu_etl_pipeline                                   â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  [Extract PostgreSQL] â”€â”€â”¬â”€â”€> [T1 Patient] â”€â”€> [Dim Patient]â”‚
â”‚  â”‚                         â”‚                                â”‚ â”‚
â”‚  â”‚  [Extract CSV]      â”€â”€â”€â”€â”´â”€â”€> [T1 Consult] â”€â”€> [Fait Consult]â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Scheduler â”‚ Webserver â”‚ Workers (Celery)                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Apache Spark :8081                          â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Master â”€â”€> Worker 1 (2 cores, 2GB RAM)                  â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Jobs:                                                    â”‚ â”‚
â”‚  â”‚  â€¢ chu_spark_processing.py                               â”‚ â”‚
â”‚  â”‚  â€¢ Transformations lourdes                               â”‚ â”‚
â”‚  â”‚  â€¢ AgrÃ©gations distribuÃ©es                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                             â”‚
            Extract                       Extract
               â”‚                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     SOURCES PostgreSQL       â”‚  â”‚     SOURCES CSV             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚  â”‚                             â”‚
â”‚  PostgreSQL :5432            â”‚  â”‚  Fichiers plats (DATA 2024) â”‚
â”‚  Database: healthcare_data   â”‚  â”‚                             â”‚
â”‚                              â”‚  â”‚  â€¢ finess_*.csv             â”‚
â”‚  Tables:                     â”‚  â”‚  â€¢ SATISFACTION/*.csv       â”‚
â”‚  â€¢ patient      (100K)       â”‚  â”‚  â€¢ DECES/*.csv              â”‚
â”‚  â€¢ consultation (1M)         â”‚  â”‚  â€¢ hospitalisation.csv      â”‚
â”‚  â€¢ professionnel (1M)        â”‚  â”‚                             â”‚
â”‚  â€¢ diagnostic   (15K)        â”‚  â”‚  Total: ~27 fichiers        â”‚
â”‚  â€¢ medicaments              â”‚  â”‚                             â”‚
â”‚  â€¢ mutuelle                  â”‚  â”‚                             â”‚
â”‚                              â”‚  â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SERVICES SUPPORT                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  pgAdmin :5050          Redis :6379         Bases internes    â”‚
â”‚  Interface PostgreSQL   Cache Airflow       â€¢ airflow-db      â”‚
â”‚                                             â€¢ superset-db     â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Flux de donnÃ©es dÃ©taillÃ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PHASE 1: EXTRACTION (E)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PostgreSQL                         CSV Files
    â”‚                                  â”‚
    â”‚ Airflow Task:                   â”‚ Airflow Task:
    â”‚ extract_from_postgres()         â”‚ extract_csv_files()
    â”‚                                  â”‚
    â”œâ”€â–º SELECT * FROM patient         â”œâ”€â–º Read finess.csv
    â”œâ”€â–º SELECT * FROM consultation    â”œâ”€â–º Read SATISFACTION/*.csv
    â”œâ”€â–º SELECT * FROM professionnel   â”œâ”€â–º Read DECES/*.csv
    â””â”€â–º SELECT * FROM diagnostic      â””â”€â–º Read hospitalisation.csv
    â”‚                                  â”‚
    â”‚                                  â”‚
    â–¼                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MinIO Bronze (s3://bronze/)              â”‚
â”‚  â€¢ bronze/postgresql/patient/extract_20250110.csv â”‚
â”‚  â€¢ bronze/postgresql/consultation/...            â”‚
â”‚  â€¢ bronze/csv/etablissements/finess.csv          â”‚
â”‚  â€¢ bronze/csv/satisfaction/ESATIS48H_2020.csv    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           PHASE 2: TRANSFORMATION T1 (ConformitÃ©)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Bronze Zone
    â”‚
    â”‚ Airflow Tasks:
    â”‚ â€¢ t1_transform_patient()
    â”‚ â€¢ t1_transform_consultation()
    â”‚ â€¢ t1_transform_etablissement()
    â”‚ â€¢ t1_transform_satisfaction()
    â”‚ â€¢ t1_transform_deces()
    â”‚
    â”‚ OpÃ©rations:
    â”œâ”€â–º Pseudonymisation SHA-256
    â”‚   (nom, prenom, email, tel, NSS)
    â”‚
    â”œâ”€â–º Suppression PII
    â”‚   DROP COLUMN nom, prenom, ...
    â”‚
    â”œâ”€â–º Normalisation dates
    â”‚   ISO 8601: YYYY-MM-DD
    â”‚
    â”œâ”€â–º CrÃ©ation tranches d'Ã¢ge
    â”‚   0-18, 19-35, 36-50, 51-65, 65+
    â”‚
    â”œâ”€â–º Validation clÃ©s Ã©trangÃ¨res
    â”‚   id_patient, id_professionnel, ...
    â”‚
    â””â”€â–º Nettoyage valeurs manquantes
        NULL handling
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MinIO Silver (s3://silver/)              â”‚
â”‚  â€¢ silver/patient/patient_clean_20250110.csv     â”‚
â”‚  â€¢ silver/consultation/consultation_clean_...    â”‚
â”‚  â€¢ silver/etablissement/...                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      PHASE 3: TRANSFORMATION T2 (ModÃ¨le dimensionnel)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Silver Zone
    â”‚
    â”‚ Spark Jobs / Airflow Tasks:
    â”‚
    â”œâ”€â–º CREATE DIMENSIONS
    â”‚   â”‚
    â”‚   â”œâ”€â–º DIM_TEMPS
    â”‚   â”‚   Calendrier 2014-2025
    â”‚   â”‚   (jour, mois, annÃ©e, trimestre, semaine...)
    â”‚   â”‚
    â”‚   â”œâ”€â–º DIM_PATIENT
    â”‚   â”‚   FROM silver/patient_clean
    â”‚   â”‚   (id, sexe, age, tranche_age)
    â”‚   â”‚
    â”‚   â”œâ”€â–º DIM_ETABLISSEMENT
    â”‚   â”‚   JOIN silver/etablissement + FINESS
    â”‚   â”‚   (id, nom, type, region, capacite)
    â”‚   â”‚
    â”‚   â”œâ”€â–º DIM_DIAGNOSTIC
    â”‚   â”‚   FROM diagnostic
    â”‚   â”‚   (id, code_CIM10, libelle, categorie)
    â”‚   â”‚
    â”‚   â”œâ”€â–º DIM_PROFESSIONNEL
    â”‚   â”‚   FROM professionnel
    â”‚   â”‚   (id, specialite, service)
    â”‚   â”‚
    â”‚   â””â”€â–º DIM_MUTUELLE, DIM_SPECIALITE, DIM_TYPE_ENQUETE
    â”‚
    â”‚
    â””â”€â–º CREATE FAITS
        â”‚
        â”œâ”€â–º FAIT_CONSULTATION
        â”‚   JOIN consultation + patient + professionnel
        â”‚        + diagnostic + etablissement
        â”‚   MESURES: nb_consultations, duree_moyenne
        â”‚   PARTITION BY annee
        â”‚
        â”œâ”€â–º FAIT_HOSPITALISATION
        â”‚   JOIN hospitalisation + patient + etablissement
        â”‚   MESURES: nb_hospit, duree_sejour, taux_occupation
        â”‚   PARTITION BY annee, region
        â”‚
        â”œâ”€â–º FAIT_DECES
        â”‚   JOIN deces + patient + localisation
        â”‚   MESURES: nb_deces, age_moyen
        â”‚   PARTITION BY region
        â”‚
        â””â”€â–º FAIT_SATISFACTION
            JOIN satisfaction + etablissement + temps
            MESURES: note_moyenne, nb_reponses
            PARTITION BY annee
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MinIO Gold (s3://gold/)                  â”‚
â”‚                                                   â”‚
â”‚  dimensions/                                      â”‚
â”‚  â”œâ”€ dim_temps.parquet                            â”‚
â”‚  â”œâ”€ dim_patient.parquet                          â”‚
â”‚  â””â”€ ...                                           â”‚
â”‚                                                   â”‚
â”‚  faits/                                           â”‚
â”‚  â”œâ”€ fait_consultation/                           â”‚
â”‚  â”‚   â”œâ”€ annee=2019/*.parquet                     â”‚
â”‚  â”‚   â”œâ”€ annee=2020/*.parquet                     â”‚
â”‚  â”‚   â””â”€ annee=2021/*.parquet                     â”‚
â”‚  â”œâ”€ fait_hospitalisation/                        â”‚
â”‚  â”œâ”€ fait_deces/                                  â”‚
â”‚  â””â”€ fait_satisfaction/                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            PHASE 4: ANALYSE ET VISUALISATION                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Gold Zone (Parquet)
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    â”‚                    â”‚
    â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Superset   â”‚  â”‚  Jupyter Lab â”‚  â”‚  Direct SQL  â”‚
â”‚             â”‚  â”‚              â”‚  â”‚              â”‚
â”‚ Dashboards: â”‚  â”‚ Analysis:    â”‚  â”‚ RequÃªtes:    â”‚
â”‚ â€¢ KPIs      â”‚  â”‚ â€¢ EDA        â”‚  â”‚ â€¢ Ad-hoc     â”‚
â”‚ â€¢ Charts    â”‚  â”‚ â€¢ ML         â”‚  â”‚ â€¢ Validation â”‚
â”‚ â€¢ Reports   â”‚  â”‚ â€¢ Graphes    â”‚  â”‚ â€¢ Tests      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                    â”‚                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   UTILISATEURS   â”‚
              â”‚                  â”‚
              â”‚ â€¢ Analystes      â”‚
              â”‚ â€¢ Data Scientistsâ”‚
              â”‚ â€¢ DÃ©cideurs CHU  â”‚
              â”‚ â€¢ MÃ©decins       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## SchÃ©ma rÃ©seau Docker

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Docker Network: chu_bigdata_network              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  postgres    â”‚  â”‚  pgadmin     â”‚  â”‚  minio       â”‚        â”‚
â”‚  â”‚  :5432       â”‚  â”‚  :5050       â”‚  â”‚  :9000/:9001 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ airflow-db   â”‚  â”‚ airflow-web  â”‚  â”‚ airflow-sch  â”‚        â”‚
â”‚  â”‚  :5432       â”‚  â”‚  :8080       â”‚  â”‚              â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚airflow-workerâ”‚  â”‚ spark-master â”‚  â”‚spark-worker-1â”‚        â”‚
â”‚  â”‚              â”‚  â”‚  :8081       â”‚  â”‚              â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  jupyter     â”‚  â”‚ superset-db  â”‚  â”‚  superset    â”‚        â”‚
â”‚  â”‚  :8888       â”‚  â”‚  :5432       â”‚  â”‚  :8088       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚  redis       â”‚                                              â”‚
â”‚  â”‚  :6379       â”‚                                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Port Mapping (Host â†’ Container)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HÃ”TE (Votre machine)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  localhost:5432  â†’ postgres:5432     (PostgreSQL)              â”‚
â”‚  localhost:5050  â†’ pgadmin:80        (pgAdmin)                 â”‚
â”‚  localhost:9000  â†’ minio:9000        (MinIO API)               â”‚
â”‚  localhost:9001  â†’ minio:9001        (MinIO Console)           â”‚
â”‚  localhost:8080  â†’ airflow-web:8080  (Airflow)                 â”‚
â”‚  localhost:8081  â†’ spark-master:8080 (Spark UI)                â”‚
â”‚  localhost:8888  â†’ jupyter:8888      (Jupyter)                 â”‚
â”‚  localhost:8088  â†’ superset:8088     (Superset)                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Volumes Docker persistants

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VOLUMES DOCKER                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  chu_postgres_data         â†’ /var/lib/postgresql/data          â”‚
â”‚  â””â”€ Contient toutes les tables (patient, consultation, ...)    â”‚
â”‚                                                                 â”‚
â”‚  chu_pgadmin_data          â†’ /var/lib/pgadmin                  â”‚
â”‚  â””â”€ Configuration pgAdmin, connexions sauvegardÃ©es             â”‚
â”‚                                                                 â”‚
â”‚  chu_minio_data            â†’ /data                             â”‚
â”‚  â””â”€ Tous les buckets (bronze, silver, gold)                    â”‚
â”‚     â”œâ”€ bronze/ (donnÃ©es brutes)                                â”‚
â”‚     â”œâ”€ silver/ (donnÃ©es nettoyÃ©es)                             â”‚
â”‚     â””â”€ gold/ (entrepÃ´t de donnÃ©es)                             â”‚
â”‚                                                                 â”‚
â”‚  chu_airflow_db_data       â†’ /var/lib/postgresql/data          â”‚
â”‚  â””â”€ MÃ©tadonnÃ©es Airflow (DAGs, runs, logs)                     â”‚
â”‚                                                                 â”‚
â”‚  chu_superset_db_data      â†’ /var/lib/postgresql/data          â”‚
â”‚  â””â”€ Configuration Superset (dashboards, charts)                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“Œ Ces volumes PERSISTENT mÃªme si vous arrÃªtez les conteneurs
   Pour tout supprimer : docker-compose down -v
```

---

## Correspondance Ancien â†” Nouveau

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ANCIEN (Manuel)    â”‚      NOUVEAU (Docker Stack)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚                                         â”‚
â”‚  Talend 7.3.1        â”‚  Apache Airflow 2.8                    â”‚
â”‚  - Jobs ETL manuels  â”‚  - DAGs Python automatisÃ©s             â”‚
â”‚  - Interface lourde  â”‚  - Web UI moderne                      â”‚
â”‚  - ObsolÃ¨te (2020)   â”‚  - Ã€ jour (2024)                       â”‚
â”‚                      â”‚                                         â”‚
â”‚  Cloudera VM         â”‚  MinIO (S3-compatible)                 â”‚
â”‚  - HDFS distribuÃ©    â”‚  - Object Storage                      â”‚
â”‚  - 60 GB VM          â”‚  - Conteneur Docker lÃ©ger              â”‚
â”‚  - Lent au dÃ©marrage â”‚  - DÃ©marrage instantanÃ©                â”‚
â”‚                      â”‚                                         â”‚
â”‚  Hive/Hadoop         â”‚  Apache Spark 3.5                      â”‚
â”‚  - MapReduce classiqueâ”‚  - 100x plus rapide                    â”‚
â”‚  - HiveQL            â”‚  - PySpark + SQL                       â”‚
â”‚  - Pas de Python     â”‚  - API Python complÃ¨te                 â”‚
â”‚                      â”‚                                         â”‚
â”‚  Power BI (payant)   â”‚  Apache Superset (gratuit)             â”‚
â”‚  - 150â‚¬/utilisateur  â”‚  - Open source                         â”‚
â”‚  - Windows only      â”‚  - Cross-platform                      â”‚
â”‚  - Licence requise   â”‚  - Libre                               â”‚
â”‚                      â”‚                                         â”‚
â”‚  PostgreSQL 14       â”‚  PostgreSQL 15                         â”‚
â”‚  - Installation      â”‚  - Docker                              â”‚
â”‚    manuelle          â”‚  - Configuration automatique           â”‚
â”‚                      â”‚                                         â”‚
â”‚  Scripts manuels     â”‚  Jupyter Lab                           â”‚
â”‚  - Python/R isolÃ©s   â”‚  - Environnement complet               â”‚
â”‚  - Pas d'interactivitÃ©â”‚  - Notebooks interactifs               â”‚
â”‚                      â”‚                                         â”‚
â”‚  Installation :      â”‚  Installation :                        â”‚
â”‚  2-3 heures          â”‚  5 minutes                             â”‚
â”‚                      â”‚                                         â”‚
â”‚  Stockage :          â”‚  Stockage :                            â”‚
â”‚  60+ GB (VM)         â”‚  10-20 GB (conteneurs)                 â”‚
â”‚                      â”‚                                         â”‚
â”‚  DÃ©marrage :         â”‚  DÃ©marrage :                           â”‚
â”‚  10-15 minutes       â”‚  30 secondes                           â”‚
â”‚                      â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## LÃ©gende des symboles

```
ğŸ“Š  Visualisation / Dashboards
ğŸ““  Notebooks / Analyse
ğŸ¥‡  Zone Gold (Data Warehouse)
ğŸ¥ˆ  Zone Silver (Cleaned Data)
ğŸ¥‰  Zone Bronze (Raw Data)
âš™ï¸  Orchestration / ETL
ğŸ—„ï¸  Base de donnÃ©es relationnelle
ğŸ“  Fichiers plats (CSV)
ğŸ”„  Transformation
â¡ï¸  Flux de donnÃ©es
ğŸŒ  Interface web
ğŸ³  Conteneur Docker
ğŸ’¾  Stockage persistant
```

---

Cette architecture vous permet de :
âœ… Traiter des donnÃ©es massives (1M+ lignes)
âœ… Respecter le RGPD (pseudonymisation)
âœ… Optimiser les performances (partitionnement, Parquet)
âœ… Visualiser les rÃ©sultats (dashboards interactifs)
âœ… Travailler en Ã©quipe (tout en Docker)
âœ… Reproduire facilement (portable)

**Le tout en 1 seule commande de dÃ©marrage ! ğŸš€**
